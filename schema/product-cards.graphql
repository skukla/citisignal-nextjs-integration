# Product Cards Query Schema
#
# Types and query for product listing/category pages
# Supports both Catalog Service and Live Search with dynamic facets

# Shared types used by product cards
type ColorOption {
  name: String
  hex: String
}

type ProductImage {
  url: String
  altText: String
}

# Product card type for listing pages
type ProductCard {
  id: String!
  sku: String!
  urlKey: String!
  name: String!
  manufacturer: String
  price: String!
  originalPrice: String
  discountPercent: Int
  inStock: Boolean!
  image: ProductImage     
  memory: [String]   
  colors: [ColorOption]
}

# Facet option with count
type FacetOption {
  label: String!
  value: String!
  count: Int!
}

# Facet for filtering
type Facet {
  attribute: String!
  label: String!
  options: [FacetOption]!
}

# Product search result with pagination and facets
type ProductCardResult {
  items: [ProductCard]
  totalCount: Int
  hasMoreItems: Boolean!
  currentPage: Int
  facets: [Facet]
}

# Filter input for product searches
input Citisignal_ProductFilter {
  category: String
  manufacturer: String
  memory: [String]
  colors: [String]
  priceMin: Float
  priceMax: Float
  onSaleOnly: Boolean
}

# Sort options
input Citisignal_SortInput {
  attribute: String!
  direction: String!
}

# Product cards query
extend type Query {
  Citisignal_productCards(
    phrase: String
    filter: Citisignal_ProductFilter
    limit: Int = 20
    page: Int = 1
    facets: Boolean = false
    sort: Citisignal_SortInput
  ): ProductCardResult
}