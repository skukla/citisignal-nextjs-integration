# Product Cards Query Schema
#
# Types and query for product listing/category pages
# Supports both Catalog Service and Live Search
# Facets are handled by separate Citisignal_productFacets query

# Shared types used by product cards
type ColorOption {
  name: String
  hex: String
}

type ProductImage {
  url: String
  altText: String
}

# Product card type for listing pages
type ProductCard {
  id: String!
  sku: String!
  urlKey: String!
  name: String!
  manufacturer: String
  price: String!
  originalPrice: String
  discountPercent: Int
  inStock: Boolean!
  image: ProductImage     
  memory: [String]   
  colors: [ColorOption]
}

# Product search result with pagination
type ProductCardResult {
  items: [ProductCard]
  totalCount: Int
  hasMoreItems: Boolean!
  currentPage: Int
  facets: [Facet]  # Only populated on page 1 to reduce duplication
}

# Filter input for product searches
input Citisignal_ProductFilter {
  category: String
  manufacturer: String
  memory: [String]
  colors: [String]
  priceMin: Float
  priceMax: Float
  onSaleOnly: Boolean
}

# Sort direction enum
enum SortDirection {
  ASC
  DESC
}

# Sort attribute enum for product listings
enum ProductSortAttribute {
  RELEVANCE     # Default for search results
  PRICE         # Sort by price
  NAME          # Sort by product name
}

# Sort options
input Citisignal_SortInput {
  attribute: ProductSortAttribute!
  direction: SortDirection!
}

# Product cards query
extend type Query {
  Citisignal_productCards(
    phrase: String
    filter: Citisignal_ProductFilter
    limit: Int = 20
    page: Int = 1
    sort: Citisignal_SortInput
  ): ProductCardResult
}